\documentclass[openright,twoside,10pt]{book}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

\usepackage{feynmp}

\usepackage{geometry}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathrsfs}

\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}

\usepackage{graphicx}
\graphicspath{ {../img/} }

\usepackage{xcolor}

%%%%%%%%% PYTHON CODE %%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Default fixed font does not support bold face
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{12} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{12}  % for normal

% Custom colors
\usepackage{color}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}

\usepackage{listings}

% Python style for highlighting
\newcommand\pythonstyle{\lstset{
language=Python,
basicstyle=\ttm,
otherkeywords={self},             % Add keywords here
keywordstyle=\ttb\color{deepblue},
emph={MyClass,__init__},          % Custom highlighting
emphstyle=\ttb\color{deepred},    % Custom highlighting style
stringstyle=\color{deepgreen},
frame=tb,                         % Any extra options here
showstringspaces=false            % 
}}


% Python environment
\lstnewenvironment{python}[1][]
{
\pythonstyle
\lstset{#1}
}
{}

% Python for external files
\newcommand\pythonexternal[2][]{{
\pythonstyle
\lstinputlisting[#1]{#2}}}

% Python for inline
\newcommand\pythoninline[1]{{\pythonstyle\lstinline!#1!}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{url}

% harvard bibliography stryle
\usepackage[abbr]{harvard}



\geometry{%
  textwidth  = 156mm ,
  textheight = 234mm ,
  a4paper            ,
  includehead        ,
  hcentering         ,
  vcentering
}

\usepackage[osf,proportional,space]{erewhon}
\usepackage[rigidchapters,pagestyles]{titlesec}
\usepackage{titletoc,lipsum,multicol}

	
\makeatletter
\newcommand\chap@author{}
\newcommand\chapauthor[1]{%
  \cleardoublepage
  \gdef\chap@author{#1}%
}
\def\chap@author{}

\titleformat{\chapter}[hang]
  {\LARGE\bfseries\filright}
  {\thechapter}
  {7pt} % {0pt}	
  {%
    \ifx\chap@author\@empty\else
      \setlength{\unitlength}{1mm}%
      \begin{picture}(0,0)
        \put(0,-17){\makebox(0,0)[l]{\Large\mdseries\itshape \chap@author}}t
      \end{picture}%
    \fi
  }
  [%
    \thispagestyle{empty}%s
    \ifx\chap@author\@empty\else
      \addtocontents{toc}{%
        \vspace{-5pt}%
        \protect\contentsline{chapter}{\mdseries\itshape \chap@author}{}{}%
      }%
      \addtocontents{toc}{\addvspace{5pt}}%
    \fi	
    \startcontents
  ]


\titleformat{\section}[hang]
  {\Large\bfseries\filright}
  {\thesection}
  {7pt} %{0pt} % section title distance between numbering and Title	
  {}

%\titlespacing*{\chapter}{0pt}{0pt}{3cm}
%\titlespacing*{\section}{0pt}{.75pc}{.5pc}s

\titlespacing*{\chapter}{0pt}{0pt}{3cm} % title positions
\titlespacing*{\section}{0pt}{2pc}{.5pc} %{0pt}{0.75pc}{.5pc} % distance from {left margin}{above}{below}
\titlespacing*{\subsection}{0pt}{2pc}{0.5pc}

\newpagestyle{main}{%
  \sethead[%
    \ifx\chap@author\@emptys
      {\makebox[1.5pc][l]{\thepage}{\lsstyle\MakeUppercase\chaptertitle}}%
    \else
      {\makebox[1.5pc][l]{\thepage}{\lsstyle\MakeUppercase\chap@author}}%
    \fi]
    [][]
    {}{}{}
}

\renewcommand\@makefntext[1]{%
  \parindent 1em%
  \noindent
  \hb@xt@1.8em{\hss\@makefnmark\hspace{0.5em}}#1}

\let\footnoterule\relaxs
\makeatother

\usepackage[activate=true]{microtype}
	
\pagestyle{main}

%\setcounter{secnumdepth}{-1}
\setcounter{secnumdepth}{3}

\raggedbottom	


% Hyperref. Hyperref needs to be important last.
%\usepackage{hyperref}
%\hypersetup{s
%    colorlinks = true,
%    linkcolor=blue,
%    linkbordercolor = {blue},
%    citecolor={blue}
%}







\usepackage[
pdfauthor={balthasar},
pdftitle={How to do this},
pdfstartview=XYZ,
bookmarks=true,
colorlinks=true,
linkcolor=blue,
urlcolor=blue,
citecolor=blue,
pdftex,
bookmarks=true,	
linktocpage=true, % makes the page number as hyperlink in table of content
hyperindex=true
]{hyperref}
\usepackage{hyperref}
%\usepackage{harvard}	
\urlstyle{rm}
\usepackage[all]{hypcap}
\hypersetup{
backref=true
bookmarksnumbered,
pdfstartview={FitH},
citecolor={blue},
linkcolor={blue}, 
urlcolor={blue},	
pdfpagemode={UseOutlines}
}

\begin{document}
A slowly growing repository of notes from self-study and teaching. Needless to say, they're unedited and incomplete.\\	
\\
\texttt{balthasar@rhizomeworks.com}

\tableofcontents
\input{./chapters/sets.tex}
\input{./chapters/combinatorics.tex}
\input{./chapters/linearalgebra.tex}
\input{./chapters/probability.tex}
\input{./chapters/informationtheory.tex}
\input{./chapters/stochasticprocesses.tex}
\input{./chapters/statistics}
\input{./chapters/linearregression.tex}

\input{./chapters/bayesiandataanalysis.tex}
\input{./chapters/unsupervised}
\input{./chapters/dynamicalsystems.tex}


\Urlmuskip=0mu plus 2mu\relax
\bibliographystyle{agsm}
\bibliography{references}



\end{document}

