\section{$\sigma$-Algebras}

\subsection{Definition}
Given a set $X$, a $\sigma$-Algebra $\mathscr{A}$ is a collection of subsets of a given set $X$, which has to satisfy the conditions:


\begin{itemize}
\item $\emptyset, X \in \mathscr{A}$
\item If $A\in\mathscr{A}$, then $A^c := X\setminus A \in \mathscr{A}$
\item $\mathscr{A}$ has (possibly infinitely many) countable subsets $A_i \in \mathscr{A},\ i \in \mathbb{N}$. Then $\bigcup_{i=1}^{\infty}A_i \in \mathscr{A}$. That is, the $\sigma$-algebra is closed under countable unions of its subsets. 
\end{itemize}

An element of the $\sigma$-Algebra are $\mathscr{A}$-measurable sets, or measurable with respect to the $\sigma$-Algebra $\mathscr{A}$. A $\sigma$-algebra is a subset of the power set of $S$, i.e. $\mathscr{A} \subseteq P(X)$. 

\subsubsection{Example: The Smallest Possible $\sigma$-Algebra}

\begin{equation}
\mathscr{A} = \{\emptyset, X\}
\end{equation}

\subsubsection{Example: The Largest Possible $\sigma$-Algebra} 
The largest possible $\sigma$-Algebra is the power set:
\begin{equation}
\mathscr{A} = P(X)
\end{equation}

However, there are important examples where it is not possible to define a $\sigma$-algebra on the full power set. 


\subsection{Intersection Property}
The intersection of $\sigma$ algebras is also a $\sigma$-algebra. That way, a $\sigma$-algebra with the desired properties can be constructed by creating individual $\sigma$-algebras with the properties in question and forming their intersection.

\begin{equation}
\bigcap_i \mathscr{A} \ \ \mathrm{is\ also\ a\ }\sigma-\mathrm{algebra}
\end{equation}


\subsection{Generated $\sigma$-Algebras}

For a subset of the powerset $\mathscr{M} \subseteq P(X)$, that does not necessarily have to satisfy the properties of the $\sigma$-Algebra, the \textit{smallest} $\sigma$-algebra that contains $\mathscr{M}$ is the $\sigma$-algebra \textit{generated} by $\mathscr{M}$. It can be constructed through the intersection of all $\sigma$-algebras  on $X$ that contain $\mathscr{M}$. 

\begin{equation}
\sigma(\mathscr{M}) = \bigcap_{\mathscr{A}\supseteq\mathscr{M}}\mathscr{A}
\end{equation}

$\sigma(\mathscr{M})$ is the $\sigma$-algebra \textit{generated} by $\mathscr{M}$. 

\subsubsection{Example: Generated $\sigma$-Algebra}

Take $X = \{a,b,c,d\}$, and $\mathscr{M} = \{ \{a\}, \{b\}\}$. Note that $\mathscr{M}$ is not a $\sigma$-algebra. To find the smallest $\sigma$-algebra that contains $\mathscr{M}$, one adds the elements necessary to fulfill the conditions on a $\sigma$-algebra. These are the empty set $\emptyset$ and the full set $X$, the union $\{a,b\}$, and the complements.

\begin{equation}
\sigma(\mathscr{M}) = \left\{ \emptyset, X, \{a\}, \{b\}, \{a,b\}, \{b,c,d\}, \{a,c,d\}, \{c,d\} \right\}
\end{equation}


\subsection{Borel $\sigma$-Algebras ($\mathscr{B}$)	}

Borel $\sigma$-Algebras is the $\sigma$-Algebra generated by \textit{open sets}, for example $\sigma(\mathbb{R}^n)$ or $\sigma(\mathscr{M})$ with $\mathscr{M} = (0,1)$.


\section{Measures, Measurable Spaces and Measure Spaces}
A \textit{measure} is a function that gives a volume measure for subsets of a $\sigma$-algebra, where a $\sigma$-algebra is a special sort of collection of subsets of some set $X$. 
The combination $(X,\mathscr{A})$ of a set $X$ and a $\sigma$-Algebra that is defined on $X$ is called a \textit{measurable space}. A measure is a function defined on the $\sigma$-Algebra and maps to the positive real line (including $\infty$!):

\begin{equation}
\mu: \mathscr{A} \rightarrow [0,\infty)\cup\{\infty\} 
\end{equation}

It has to satisfy the conditions:

\begin{itemize}
\item $\mu(\emptyset) = 0$
\item $\mu(\bigcup_i A_i) = \sum_i \mu(A_i)$ if $A_i \cap A_j = \emptyset$ when $i\neq j$ (additive)
\item $\mu(\bigcup^{\infty}_i A_i) = \sum^{\infty}_i \mu(A_i)$ if $A_i \cap A_j = \emptyset$ when $i\neq j$ ($\sigma$-additive) 
\end{itemize}

Where the infinite sum corresponds to gradually approximating the full volume by taking the union of countably infinitely many subsets. The collection $(X,\mathscr{A},\mu)$ is a \textit{measure space}. 

The reason why the $\sigma$-algebra is included in the definition of a measurable space is because unless a $\sigma$-algebra is defined on a set $X$, there is no guarantee that a measure exists on $X$.

\subsection{Example: Counting Measure}

\begin{equation}
\mu(A) = \left\{\begin{array}{l} |A| \mathrm{\ if\ }A\mathrm{\ has\ finite\ elements}\\ \infty\mathrm{\ else}\end{array}\right.
\end{equation}

\subsection{Example: Dirac Measure}
\begin{equation}
\delta_p(A) = \left\{\begin{array}{l} 1 \mathrm{\ if\ }p\in A\\ 0 \mathrm{\ else} \end{array}\right.
\end{equation}

\subsection{Example: Volume Measure}
For $X=\mathbb{R}^n$, the conventional volume measure satisfies the properties of:

\begin{itemize}
\item $\mu([0,1]^n) = 1$
\item $\mu(x + A) = \mu(A)$ for some $x\in \mathbb{R}^n$ (translation invariance)
\end{itemize}



\section{Length Measure on the Real Line}

This is an important example of where it is not possible to define a measure on the whole powerset. This is why measure theory is founded on $\sigma$-algebras.\\

Take the following measure problem:\\

We search a measure $\mu$ on $P(\mathbb{R})$ with the properties:

\paragraph{}
\begin{enumerate}
\item $\mu([a,b]) = b-a,\ b>a$
\item $\mu(x+A) = \mu(A),\ A\in\mathbb{R},\ x\in\mathbb{R}$	 
\end{enumerate}

The only solution to this problem is the trivial map, $\mu(\mathbb{R}) = 0$. A proof goes as follows:

\paragraph{Claim}
Let $\mu$ be a measure on $P(\mathbb{R})$ with $ \mu ((0,1]) < \infty  $ and (2). The only measure that satisfies this condition is the zero measure, $\mu = 0$, which violates (1).

Take the interval $I:=(0,1]$ with equivalence relation $x\sim y \equiv x-y \in \mathbb{Q}$. That is, $x$ and $y$ are considered equivalent if they differ by a rational number. That is, we define sets of equivalent numbers, equivalence classes  $ [x] := \{ x+r: r \in \mathbb{Q}, x+r \in I \} $. The equivalence classes are a disjoint decomposition (a partition) of the unit interval $I$ in terms of possibly infinite, countable number of elements.

Take a choice set  $A\subseteq I$ that consists of one number from each of the equivalence classes $[x]$ that make up $I$. (cf. sections \ref{sec:choicesets}, \ref{sec:axiomofchoice}). It has the property: 
\begin{itemize}
\item For each $[x]$ there is an $a\in A$ with $a \in [x]$ 
\item For all $a,b \in A$, if $a,b \in [x] \implies a=b$ 
\end{itemize}

Take the translations of a set $A$, $A_n := r_n + A$ where $(r_n)_{n\in\mathbb{N}}$  are an enumeration of $\mathbb{Q}\cap(1,1]$. 

\paragraph{Proof}
The axiom of choice guarantees that it is possible to form a choice set $A$ and the definition of equivalence classes guarantees that the translations of $A_n$ are still choice sets. 

\paragraph{Claim}
$A_n \cap A_m = \empty$ if $n\neq m$.

\paragraph{Proof}
Take $x \in A_n \cap A_m \implies \begin{array}{ll} x = r_n + a, & a_n \in A\\ x = r_m + a_m, & a_m \in A \end{array}$

Then, $r_n + a_n = r_m + a+m  \implies a_n - a_m = r_m - r_n \in \mathbb{Q} \implies a_n \sim a_m$ according to the definition of the equivalence classes. Also, $a_m, a_n \in [a_m] \implies a_n = a_m \implies r_n = r_m \implies n=m$.

\paragraph{Claim}
$(0,1] \subseteq \bigcup_{n\in\mathbb{N}}A_n \subseteq (-1,2]$ 

\paragraph{Proof}
Given $r_n \in \mathbb{Q}\cap (-1,1]$, $-1< r_n \leq 1$ and $a_n \in A,\ 0<a_n\leq 1$ given that $A\subset (0,1]$, $-1 < r_n + a_n \leq 2$. Therefore $A_n \subseteq (-1,2]\ \forall n\in\mathbb{N}$. Therefore the union $(0,1] \subseteq \bigcup_{n\in\mathbb{N}}A_n \subseteq (-1,2]$.


\paragraph{Assume} $\mu$ a measure on $P(\mathbb{R})$ with $\mu((0,1]) < \infty$ and (2). 

By (2):  $\mu(r_n + A) = A$ for all $n\in\mathbb{N}$.

By the property $(0,1] \subseteq \bigcup_{n\in\mathbb{N}}A_n \subseteq (-1,2]$, $\mu((0,1]) \leq \mu(\bigcup_{n\in \mathbb{N}} A_n) \leq \mu((-1,2])$. 
	
Further, $\mu((0,1]) = c < \infty$. 

So we can use the disjoint union to express $\mu((-1,2]) = \mu((-1,0] \sqcup (0,1] \sqcup (1,2]) = 3c$. 

That implies, $c \leq \sum_{n=1}^{\infty}\mu(A_n) \leq 3c \implies c \leq \sum_{n=1}^{\infty}\mu(A) \leq 3c$. Given that the series is infinite, the only way for this to be true is if $\mu(A)=0$. 

\paragraph{Conclusion}
The measure $\mu(A) = 0$, which implies $\mu((0,1]) = 0$. Because of translation invariance and $\sigma$-additivity, $\mu(\mathbb{R}) = \mu(\bigcup_{m\in\mathbb{Z}^+} (m,m+1]) = 0$. That means that the only measure that satisfies the conditions stated in the measure problem assigns $0$ to the length of the whole real line. 


  
\section{Measurable Maps}
\paragraph{Definition} Given two measurable spaces $(\Omega_1,\mathscr{A}_1), (\Omega_2, \mathscr{A}_2)$, a measurable map with respect to $\mathscr{A}_1, \mathscr{A}_2$ is $f:\Omega_1 \rightarrow \Omega_2$ if $f^{-1}(A_2)\in\mathscr{A}_1$ for all $A_2 \in \mathscr{A}_2$. That is, $f$ connects the two $\sigma$-algebras $\mathscr{A}_1$ and $\mathscr{A}_2$ in that the \textit{preimage} (cf. section \ref{sec:preimage}) of an element $A_2 \in \mathscr{A}_2$, $f^{-1}(A_2)$ is an element of $\mathscr{A}_1$. 




\subsection{Example: Characteristic Function, Indicator Function}
Take the measurable spaces $(\Omega,\mathscr{A})$ and $(\mathbb{R},\mathscr{B}(\mathbb{R}))$. 

\begin{equation}
\chi_A: \omega \rightarrow \mathbb{R},\ \ \chi_A(\omega) = \left\{\begin{array}{l} 1,\ \omega\in A\\ 0,\ \omega\notin A \end{array}\right.
\end{equation}

For all measurable $A\in\mathscr{A}$, $\chi_A$ is a measurable map. The four possible preimages are:

\begin{equation}
\begin{array}{l}
\chi_A^{-1}(\empty) = \empty,\ \chi_A^{-1}(\mathbb{R}) = \Omega\\
\chi_A(\{ 1 \}) = A\ \chi_A(\{ 1 \}) = A^c
\end{array}
\end{equation}

Where all of the preimages are contained in $\mathscr{A}_1$.


\subsection{Example: Composition of Measurable Maps}

Take measurable spaces $(\Omega_1,\mathscr{A}_1),(\Omega_2,\mathscr{A}_2),(\Omega_3,\mathscr{A}_3)$,  connected through measurable maps:

\begin{equation}
\begin{array}{l}
f: \Omega_1 \rightarrow \Omega_2 \\
g: \Omega_2 \rightarrow \Omega_3
\end{array}
\end{equation}

Then $f \circ g: \Omega_1 \rightarrow \Omega_3$ is also measurable, because $(g\circ f)^{-1}(A_3) = \underbrace{f^{-1}(\underbrace{g^{-1}(A_3)}_{\in \mathscr{A}_2})}_{\in \mathscr{A}_1}$.	 


\subsection{Example: Sums and Products of Measurable Maps}
Given $(\Omega,\mathscr{A}), (\mathbb{R},\mathscr{B}(\mathbb{R})$, if $f,g: \Omega \rightarrow \mathbb{R}$ 	are measurable maps, then $f+g, f-g, f\times g$ and $|f|$ are also measurable maps. This follows from the property that compositions of measurable maps are also measurable.



\section{Lebesgue Integrals}
\subsection{Lebesgue Integrals for Step Functions}
Take a measure space $(X,\mathscr{A}, \mu)$ and the measurable space $(\mathbb{R},\mathscr{B})$, where $X$ is any set, $\mathscr{A}$ is a special collection of subsets of $X$, $\mu$ is a map $\mu: \mathscr{A} \rightarrow [0,\infty]$, and $\mathscr{B}$ is a Borel $\sigma$-algebra on $\mathbb{R}$. Then let $f:X \rightarrow \mathbb{R}$ be a measurable map, so that $f^{-1}(E) \in \mathscr{A}$ for all $E\subseteq \mathscr{B}(\mathbb{R})$. 

\paragraph{Characteristic Function}
The integral of a characteristic function $\chi_A$ is $I(\chi_A) = \mu(A)$. 

\paragraph{Simple Functions}
Simple functions are, for example, step functions, staircase functions, etc., that can be expressed in terms of a sum of characteristic functions. That is, for $A_1,A_2,...,A_n\in\mathscr{A}$, $c_1,c_2,...,c_n\in\mathbb{R}$:

\begin{equation}
f(x) = \sum_{i=1}^n c_i \chi_{A_i}(x)
\end{equation}

Since characteristic functions are measurable and sums of characteristic functions are measurable, simple functions are measurable. Then the integral would be:

\begin{equation}
I(f) = \sum_{i=1}^n c_i \mu(A_i)
\end{equation}

However, there is a problem with this definition, because of the possibility of having to subtract infinitely large intervals. The options are to restrict simple functions to either: 

\begin{itemize}
\item restrict $A_i$ to be finite size sets.
\item restrict $c_i$ to be positive. 
\end{itemize}

\paragraph{S+}
The set of positive functions $S^+ := \{ f:X\rightarrow\mathbb{R} : f \mathrm{\ simple\ function},\ f\geq0\}$ where $f$ is measurable and has finitely many values (picture a staircase, rather than a smooth curve). For $f\in S^+$, choose representation $f(x) = \sum_{i=1}^n c_i \chi_{A_i}(x)$, $c_i \geq 0$. 



\paragraph{Lebesgue Integral for Simple Functions}
The Lebesgue integral of $f\in S^+$ with respect to the measure $\mu$:

\begin{equation}
\int_X f(x) d\mu(x) = \int_X f d\mu = I(f) = \sum_{i=1}^n c_i \mu(A_i)\ \in [0,\infty]
\end{equation}

This is a well-defined object that is independent of the specific representation of $f(x)$. It has the properties:

\begin{itemize}
\item $I(\alpha f + \beta g) = \alpha I(f) + \beta I(g)$ for $\alpha,\beta \geq 0$
\item $f \leq g \implies I(f) \leq I(g)$ (monotonicity)
\end{itemize}

The Lebesgue integral for simple functions enables defining the integral for more complex functions by approximating them.

\paragraph{Definition} 
Given a non-negative function $f:X \rightarrow [0,\infty)$, there are positive simple functions $h\in S^+$ that approximate it from below $\{h: h\in S^+, h\leq f\}$ with $h=\sum_{i=1}^n c_i \chi_{A_i}$. Then the integral of $f$ is given by the largest possible function within that set.

The \textit{Lebesgue Integral} of a function $f$ with respect to a measure $\mu$ is

\begin{equation}
\int_X f d\mu := \mathrm{sup}\{ I(h) : h\in S^+, h\leq f \}
\end{equation}

$f$ is called $\mu$-integrable if $\int_X f d\mu < \infty$.

The only thing that was needed to define the integral was a measure space $(X,\mathscr{A},\mu)$


\subsection{Monotone Convergence Theorem}

\subsubsection{Preliminaries}

Take the measurable positive function $f: X\rightarrow [0,\infty)$ which has lebesgue integral $\int_X f d\mu \in [0,\infty]$. 

\paragraph{Properties}

\subparagraph{Equality}
If $f=g$, $\mu$ almost everywhere, then $\int_X f d\mu = \int_X g d\mu$. 

That is, if $f=g$ "almost everywhere" with respect to the measure $\mu$, then the integrals are identical. This is more general than to simply say $f=g$. Rather, it requires $\mu(\{x \in X: f(x) \neq g(x) \}) = 0$. The Lebesgue integral "cannot see" things that happen on $0$-measure sets. For example, if the measure is a length measure $\mu ( [a,b] ) = b-a$, then, if $f$ and $g$ differ at a single point, then $\int_X f $ and $\int_X g$ are still the same. 

\subparagraph{Monotonicity}

Similartly, if $f\leq g$,  $\mu$ almost everywhere, then $\int_X f d\mu \leq \int_X g d\mu$.


Given that a positive simple function $h:X \rightarrow [0,infty)$ assumes a finite amount of different values, it is permissible to represent $h(x)$ in terms of the values $t$ that it assumes:

\begin{equation}
h(x) = \sum_{i=1}^n c_i \chi_{A_i} (x) = \sum_{t\in h(X)} t \chi_{\{x\in X: h(x) = t\}}
\end{equation} 

Using this representation, Then the Lebesgue integral:

\begin{equation}
I(h) = \sum_{t\in h(X)\setminus \{0\}} t \mu (\{ x\in X : h(x) = t \} ) 
\end{equation}

Where omitting the $t\in\{0\}$ makes no difference to the integral. Divide the set $X$ into $X = \tilde{X} + \tilde{X}^c$ with $\mu(\tilde{X}^c) = 0 $ and $\tilde{X} \in \mathscr{A}$. Then let:

\begin{equation}
\tilde{h}(X) := \left\{ \begin{array}{l} h(x), x\in \tilde{X}\\ a, x\in \tilde{X}^c \end{array} \right.
\end{equation}

Where $a \in [0, infty)$.  Then:

\begin{equation}
\tilde{h}(x) = \int_{t\in h(X)} t \chi_{x\in \tilde{X}: h(x) = t} + a \chi_{\tilde{X}^c}
\end{equation}

Then the integral:

\begin{equation}
I (\tilde{h}) = \sum_{t\in h(X)} t \mu( \{ x\in \tilde{X} : h(x) = t \}) + a \underbrace{\mu(\tilde{X}^c)}_{0}
\end{equation}

So that $I(h) = I(\tilde{h})$. This means that we can modify a simple function $h$ on a set with measure $0$ however we like without affecting the integral. This is enough to prove that if $f\leq g$ then $\int_X f d\mu \leq \int_X g d\mu$ in the "almost everywhere" sense. Divide $X$ into $\tilde{X}:= \{x \in X: f(x) \leq g(x) \}$ and $\tilde{X}^c$ with measure zero, where $f(x) \leq g(x)$ is not true. Since $I(h) = I(\tilde{h})$:

\begin{equation}
\begin{array}{rl}
\int_X f d\mu &= \mathrm{sup}\{ I(h): h\in S^+, h\leq f \} =  \mathrm{sup}\{ I(\tilde{h}): h\in S^+, \tilde{h}\leq f \leq g\mathrm{\ on\ }\tilde{X}\}\\
&\leq \mathrm{sup}\{ I(\tilde{h}): h\in S^+, \tilde{h}\leq g\mathrm{\ on\ }\tilde{X}\} = \int_X g d\mu
\end{array}
\end{equation}

\subparagraph{Zero Integral}
$f=0$, $\mu$ almost everywhere, then $\int_X d\mu = 0$. (Note that only positive functions $f$ are considered.




\subsubsection{Monotone Convergence Theorem}

Take a measure space $(X,\mathscr{A},\mu)$ and non-negative measurable functions $f_n: X \rightarrow [0,\infty), f: X \rightarrow [0,\infty)$, with $f_1 \leq f_2 \leq f_3 \leq ... $ with $\mu-a.e.$ (almost everywhere) and $\lim_{n\rightarrow \infty} f_n(x) = f(x). \mu-a.e. (x\in X)$.

The monotone convergence theorem states that, given a monotonic series of functions, the limit can be pulled into the integral:

\begin{equation}
\lim_{n\rightarrow \infty} \int_X f_n d\mu = \int_X f d\mu
\end{equation}


